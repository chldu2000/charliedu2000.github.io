import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang-40050c3d.js";import{_ as y,c as D,w as o,o as i,b as s,d as l,e as t,a as C,r as a,f as A,p as d}from"./app-025bdceb.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-dd4500d1.js";import"./YunCard.vue_vue_type_style_index_0_lang-c0980680.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-870a2da2.js";const Rl=JSON.parse('{"title":"如何拥有一辆属于自己的三蹦子","description":"","frontmatter":{"title":"如何拥有一辆属于自己的三蹦子","tags":["单片机","小车"],"categories":["奇怪的知识增加了"],"date":"2021-09-26T18:56:38.000Z","updated":"2021-09-26T18:56:38.000Z"},"headers":[{"level":2,"title":"三轮车也是车","slug":"三轮车也是车","link":"#三轮车也是车","children":[]},{"level":2,"title":"从零（并不是）开始的造三轮生活","slug":"从零（并不是）开始的造三轮生活","link":"#从零（并不是）开始的造三轮生活","children":[{"level":3,"title":"电机驱动","slug":"电机驱动","link":"#电机驱动","children":[]},{"level":3,"title":"蓝牙遥控与串口通信","slug":"蓝牙遥控与串口通信","link":"#蓝牙遥控与串口通信","children":[]}]},{"level":2,"title":"当你拥有了现成的轮子","slug":"当你拥有了现成的轮子","link":"#当你拥有了现成的轮子","children":[{"level":3,"title":"车身功能","slug":"车身功能","link":"#车身功能","children":[]},{"level":3,"title":"程序构成","slug":"程序构成","link":"#程序构成","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/learning/how-to-own-a-tricycle.md","path":"/home/runner/work/charliedu2000.github.io/charliedu2000.github.io/pages/posts/learning/how-to-own-a-tricycle.md","lastUpdated":1699970883000}'),c=JSON.parse('{"title":"如何拥有一辆属于自己的三蹦子","description":"","frontmatter":{"title":"如何拥有一辆属于自己的三蹦子","tags":["单片机","小车"],"categories":["奇怪的知识增加了"],"date":"2021-09-26T18:56:38.000Z","updated":"2021-09-26T18:56:38.000Z"},"headers":[{"level":2,"title":"三轮车也是车","slug":"三轮车也是车","link":"#三轮车也是车","children":[]},{"level":2,"title":"从零（并不是）开始的造三轮生活","slug":"从零（并不是）开始的造三轮生活","link":"#从零（并不是）开始的造三轮生活","children":[{"level":3,"title":"电机驱动","slug":"电机驱动","link":"#电机驱动","children":[]},{"level":3,"title":"蓝牙遥控与串口通信","slug":"蓝牙遥控与串口通信","link":"#蓝牙遥控与串口通信","children":[]}]},{"level":2,"title":"当你拥有了现成的轮子","slug":"当你拥有了现成的轮子","link":"#当你拥有了现成的轮子","children":[{"level":3,"title":"车身功能","slug":"车身功能","link":"#车身功能","children":[]},{"level":3,"title":"程序构成","slug":"程序构成","link":"#程序构成","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/learning/how-to-own-a-tricycle.md","path":"/home/runner/work/charliedu2000.github.io/charliedu2000.github.io/pages/posts/learning/how-to-own-a-tricycle.md","lastUpdated":1699970883000}'),u={name:"pages/posts/learning/how-to-own-a-tricycle.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){d("pageData",c)}},h=s("p",null,"你是否经常感到空虚寂寞、百无聊赖？你是否缺少陪伴、倍感不安、想要在这喧嚣的城市里寻找一份慰藉？",-1),f=s("p",null,"毫无疑问，拥有属于自己的车、房可以在物质层面缓解这些焦虑（确信）。买房太难了，所以就先从车开始吧。",-1),_={id:"三轮车也是车",tabindex:"-1"},E=s("p",null,"打住，我要说的并不是这种车：",-1),g=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/ln7xH36LUbiZc9O.png",alt:"车1网图"})],-1),m=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/GHQzW9Xd73DqvNF.png",alt:"车2网图"})],-1),v=s("p",null,"或者这种车：",-1),S=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/E3CDyXLPTh5qFfS.png",alt:"蝙蝠车网图"})],-1),b=s("p",null,[s("s",null,"废话，你以为我买得起？")],-1),k=s("p",null,"而是这种：",-1),x=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/En4idsW7mopQIlw.png",alt:"三蹦子"})],-1),M=s("p",null,"什么？这不行？气抖冷，难道三轮车就不是车？玩具车就不能给慰藉了？",-1),R={id:"从零（并不是）开始的造三轮生活",tabindex:"-1"},T=s("p",null,[l("是这样的，我想搞个小车已经很久了，大概大半年了？早早地就从某宝上买了亚克力板和电机、轮子（所以不算从零开始），准备大干一番，却一直没有动手。因为之前没有接触过单片机，丝毫没有头绪。"),s("s",null,"（懒）")],-1),w=s("p",null,"事情的转机出现在今年夏季小学期，我们要基于单片机学电子系统设计了。狂喜，有人教了。于是在焊完板子学了一些案例后我们就放假回家了，老师特意说要自己想想选题（不过很多人不一定想了）嗯？这还用想？做车啊！",-1),L=s("p",null,[s("s",null,"虽然这样说，我还是等到了暑假的最后一周才开始动手。")],-1),P={id:"电机驱动",tabindex:"-1"},I=s("p",null,"对于车来说，最基本的是什么？当然是能跑。所以我首先测了电机能不能转。",-1),V=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/zn1dQPEOVopC6Nb.png",alt:"拓展接口"})],-1),B=s("p",null,"最适合拿来控制两个电机的当然是 SM （步进电机）接口，给了一个 VCC 和四个引脚输出（EXT 接口蓝牙要用，485 只给了两个引脚和 GND）。直接把电机接到 VCC 和另一个引脚，没问题，但是接两个引脚给高低电平电机就不转，设推挽输出也没用，我是没想明白怎么回事。实在太逊了，这个样子连电机反转都搞不了，还怎么跑两个电机啊？",-1),U=s("p",null,"办法总比困难多，博闻强识的我（大嘘）怎么能想不到解决方案呢？好吧，其实是搜索引擎帮大忙。我借助了双路 L9110S 电机驱动来控制电机。",-1),K=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/sag6u8wGnzUjeJI.png",alt:"电机驱动"})],-1),N=s("p",null,"这样就可以做到用 SM 的 VCC 和 485 的 GND 供电，用 S1 到 S4 控制两个电机。四个引脚分别接图里下方的 A-1A 这些。A-1A 和 A-1B 控制 Motor A，Motor A连接到一个电机的两端，Motor B 同理。嗯，完美解决。",-1),$=s("p",null,"让小车按命令动起来的话当然要写程序了，先给小车运动状态的基本定义：",-1),H=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#ifndef"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"_MOVE_H")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"_MOVE_H")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"STC15F2K60S2.H"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 接电机的引脚")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sbit s1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," P4 "),s("span",{style:{color:"#89DDFF"}},"^"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sbit s2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," P4 "),s("span",{style:{color:"#89DDFF"}},"^"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sbit s3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," P4 "),s("span",{style:{color:"#89DDFF"}},"^"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sbit s4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," P4 "),s("span",{style:{color:"#89DDFF"}},"^"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 电机转动方向")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"RightMotorStop"),s("span",{style:{color:"#A6ACCD"}}," s1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LeftMotorStop"),s("span",{style:{color:"#A6ACCD"}}," s3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"RightMotorFWD"),s("span",{style:{color:"#A6ACCD"}}," s1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LeftMotorFWD"),s("span",{style:{color:"#A6ACCD"}}," s3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"RightMotorREV"),s("span",{style:{color:"#A6ACCD"}}," s1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#define"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LeftMotorREV"),s("span",{style:{color:"#A6ACCD"}}," s3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," s4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 运动和停止")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Forward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Backward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TurnLeft"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TurnRight"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"MoveInit"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#endif")]),l(`
`),s("span",{class:"line"})])])],-1),W=s("p",null,[s("s",null,"分别给高低电平应该能看懂吧？")],-1),O=s("p",null,"函数实现：",-1),X=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"move.h"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 前进")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Forward"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	LeftMotorFWD"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	RightMotorFWD"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 后退")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Backward"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	LeftMotorREV"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	RightMotorREV"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 左转")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TurnLeft"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	LeftMotorREV"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	RightMotorFWD"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 右转")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TurnRight"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	LeftMotorFWD"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	RightMotorREV"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 停车")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	LeftMotorStop"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	RightMotorStop"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 初始化，s1 到 s4 推挽输出")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"MoveInit"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	P4M0 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0xff"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	P4M1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x00"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"	"),s("span",{style:{color:"#676E95","font-style":"italic"}},"//P0 = 0;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),G=s("p",null,"我觉得这些都算得上言简意赅（叉腰），就不多解释了。",-1),Z={id:"蓝牙遥控与串口通信",tabindex:"-1"},q=s("p",null,"小车能动了，但是我们还需要控制。我最开始的想法就是做遥控，能用手机直接遥控就再好不过了。手机遥控？那就用蓝牙！",-1),z=s("p",null,"遥控器程序去手机的应用商店里搜“蓝牙串口”，最好是带按钮编辑的那种，一搜一大把，所以就先不关心了。",-1),Q=s("p",null,"小车的蓝牙接收我是用 HC-06 来做的。",-1),j=s("p",null,"老师给出的样例里面有用到蓝牙串口通信的，遂“参考”之。",-1),J=s("blockquote",null,[s("p",null,"STC15F2K60S2 系列单片机有2个高速异步串行通信端口，每个串口由2个数据缓冲器、一个移位寄存器、一个串行控制寄存器和一个波特率发生器等组成。"),s("p",null,"串口1已被用于下载电路，故本案例使用的是串口2来进行与蓝牙的通信。从芯片引脚电路图中，我们可以找到串口2对应的收发引脚分别为 P1.0 和 P1.1，将其的“接受”端和蓝牙模块的“发送”端相连，“发送”端和蓝牙模块的“接收端”端相连，再对应连接 VCC 和 GND 即实现了物理上电路的连通。"),s("p",null,"串口2只能使用定时器2作为波特率发生器，根据芯片使用手册的说明设置好定时器后，只要将要发送的数据写到 SBUF2 中，串口即自动发送缓存中的数据。"),s("p",null,[s("img",{src:"https://i.loli.net/2021/09/26/3bd725qZpOjQaWt.png",alt:"连接图示"})]),s("p",null,"——湖大超星 电子系统设计与创新基础训练 基于Andriod的数据采集系统")],-1),Y=s("p",null,"如上所示，使用串口2进行蓝牙通信，串口2只能用定时器2作为波特率发生器，所以先初始化定时器：",-1),ss=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Uart2Init"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 9600bps@11.0592MHz")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	S2CON "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x50"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 8位数据，可变波特率")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	AUXR "),s("span",{style:{color:"#89DDFF"}},"|="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x04"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 定时器2时钟为Fosc，即1T")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	T2L "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0xE0"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"   // 设定定时初值")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	T2H "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0xFE"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"   // 设定定时初值")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	AUXR "),s("span",{style:{color:"#89DDFF"}},"|="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x10"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," //启动定时器2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	IE2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x01"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	P_SW2 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0x00"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	EA "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),ls=s("p",null,"前面有注释的都是 STC-ISP 软件自动生成的，最后三句大概是中断使能、外设切换等~~，没怎么看懂~~。",-1),os=s("p",null,"然后是用于读取串口2接收数据的中断函数：",-1),ns=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"UART2_Interrupt"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," interrupt "),s("span",{style:{color:"#F78C6C"}},"8"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 中断8，用于串口2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}},"  ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#F07178"}}," temp"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#F07178"}},"	")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 检查串口2控制寄存器")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 将1字节的新数据赋给 ReceivedData")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#89DDFF"}},"(("),s("span",{style:{color:"#F07178"}},"S2CON"),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#F78C6C"}},"0x01"),s("span",{style:{color:"#89DDFF"}},")=="),s("span",{style:{color:"#F78C6C"}},"0x01"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		S2CON "),s("span",{style:{color:"#89DDFF"}},"&="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"~"),s("span",{style:{color:"#F78C6C"}},"0x01"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		temp "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," S2BUF"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		ReceivedData"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}},"temp"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}"),s("span",{style:{color:"#A6ACCD"}},"	")]),l(`
`),s("span",{class:"line"})])])],-1),ts=s("p",null,[s("s",null,[l("这里似乎可以不用 "),s("code",null,"temp"),l("。")])],-1),es=s("p",null,[s("code",null,"ReceivedData"),l(" 是个 "),s("code",null,"unsigned char"),l(" 型的全局变量。在手机的蓝牙串口应用里编辑按钮发送不同数据，根据 "),s("code",null,"ReceivedData"),l(" 来调用小车的运动控制函数就能实现遥控。这部分程序就不写出来了，"),s("code",null,"switch"),l(" 或者 "),s("code",null,"if"),l(" 判断就行。")],-1),as=s("p",null,[s("s",null,"现在一看好简单啊！那为什么我暑假里写了好几天？")],-1),cs={id:"当你拥有了现成的轮子",tabindex:"-1"},ps=s("p",null,[s("strong",null,"这部分可能不太具有复现性（湖大信息院学生除外，毕竟有老师给的 BSP）。")],-1),Fs=s("p",null,"上面这些是在八月的最后两三天完成的，一边摸鱼一边写程序，算是完成了蓝牙遥控小车的功能，想着就这样吧，也算个设计了，就这样交差。",-1),rs=s("p",null,"令我没想到的是，暑假回来之后的下半个小学期，老师给出了一套功能完备的 BSP （Board Support Package，板级支持包），里面有板子上各种外设的驱动程序。比方说要让数码管显示一个数字，原来你需要这样：写段选、写位选、设置推挽输出、引脚赋值、循环内刷新……现在你只需要这样：",-1),ys=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"DisplayerInit"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"                   // 显示模块初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"SetDisplayerArea"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"            // 只用数码管最后一位")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 数码管最后一位显示1")]),l(`
`),s("span",{class:"line"})])])],-1),Ds=s("p",null,[l("初始化之后想显示什么直接调用 "),s("code",null,"Seg7Print()"),l(" 就行，十分快捷。")],-1),is=s("p",null,"有了这样一套轮子，大家想做什么直接调库函数就行，完全不需要向我之前那样从定时器和中断开始写。于是同学们纷纷变身缝合怪，恨不得把所有模块都加到自己的设计中。",-1),Cs=s("p",null,[s("s",null,"坏了，卷起来了。")],-1),As=s("p",null,"嗯……比我的最初想法丰富多了……",-1),ds={id:"车身功能",tabindex:"-1"},us=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/27/Em4FxIQVOqHk23v.png",alt:"车身功能"})],-1),hs={id:"程序构成",tabindex:"-1"},fs=s("p",null,[l("小车整体的思想是依托 BSP 提供的"),s("strong",null,"设置事件回调函数"),l("的功能，持续获取外部和车身命令，维护几个系统变量，根据命令和这些变量判断当前小车应该执行的动作。")],-1),_s=s("p",null,[s("s",null,"就没必要给整体流程图了吧？")],-1),Es=s("p",null,"由于 BSP 是学校老师写的，且其中函数实现被封装进了库文件，我就不太好意思上传了，只讲一下整体的结构和我自己写的函数吧。",-1),gs={id:"系统变量和函数声明",tabindex:"-1"},ms=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// main.h")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 老师写的数码管显示码表就略过了")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 提供四种模式：")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 1. 红外遥控")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 2. 蓝牙串口遥控")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 3. 超声波避障")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 4. 跟随/保持距离")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 其中红外和蓝牙串口模式的运动状态均由 Remote() 控制")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 避障模式的运动状态由 AutoMove(int i) 控制，跟随模式的运动状态由 Follow(int i) 控制")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 系统利用 TenMsCallback()，每 10ms 进行运动控制，根据当前模式调用上述三个函数中的一个")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," */")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},"];"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		  // 红外和蓝牙接收的数据")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," rxdHead "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0xFA"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 蓝牙校验，为配合红外的数据头校验，不特意使用 SetUart2Rxd() 设置")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," flag"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"			// 标志位，是否允许操作，为1时允许操作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," speedState"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	// PWM 控制标志")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," speedControl"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 速度控制参数，将电机转速降为全速的 1/speedControl")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	// 速度档位，数字越大速度越快")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," dirFlag"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		// 避障转向选择")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"unsigned"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," mode"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"			// 模式标志")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ChangeSpeed"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 更改速度档位")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Remote"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		   // 遥控")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AutoMove"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"i"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 避障")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Follow"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"i"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 维持距离")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeBTRemote"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"   // 蓝牙遥控模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeIRRemote"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"   // 红外遥控模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeAuto"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 避障模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeFollow"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 跟随&控制距离模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"SwitchModes"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 切换模式")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"KeyCallback"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 按键事件回调函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Uart2Callback"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 蓝牙接收数据回调函数，仅处理解锁上锁，运动控制被 TenMsCallback() 接管")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"IRCallback"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 红外接收数据回调函数，仅处理解锁上锁，运动控制被 TenMsCallback() 接管")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TenMsCallback"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 10ms 回调，实现电机转速控制")]),l(`
`),s("span",{class:"line"})])])],-1),vs=s("p",null,[l("以上函数均在 "),s("code",null,"main.c"),l(" 中实现，下面出现的没有在此处声明的函数都来自老师的 BSP。")],-1),Ss={id:"系统初始化",tabindex:"-1"},bs=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"Key_Init"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"				// 按键初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"DisplayerInit"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		// 显示模块初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetDisplayerArea"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 使用数码管范围")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"BeepInit"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"				// 蜂鸣器初始化")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetEventCallBack"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEventKey"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," KeyCallback"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"	   // 设置按键回调函数，本机按键包括模式切换和上锁解锁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetEventCallBack"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEventSys10mS"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," TenMsCallback"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 每 10ms 进行运动控制")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	speedState "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 给PWM控制位赋初值")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	speedLevel "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 默认速度档位")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		// 启动时未上锁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"MoveInit"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},"		// 设置 s1 到 s4 推挽输出")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"ModeIRRemote"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 默认启动红外遥控模式，即模式0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"MySTC_Init"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"while"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"MySTC_OS"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"LedPrint"),s("span",{style:{color:"#89DDFF"}},"(("),s("span",{style:{color:"#F07178"}},"flag "),s("span",{style:{color:"#89DDFF"}},"<<"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"<<"),s("span",{style:{color:"#F07178"}}," mode"),s("span",{style:{color:"#89DDFF"}},"));"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 用 LED7 显示 flag 状态，亮起时表示未上锁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"											 "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// LED0、1、2、3分别表示模式0、1、2、3")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),ks={id:"车身按键功能",tabindex:"-1"},xs=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 按下车机按键的回调函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"KeyCallback"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"	"),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 按下 key1 上锁解锁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetKeyAct"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumKey1"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," enumKeyPress"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#F07178"}},"flag"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"	"),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 按下 key2 切换模式")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetKeyAct"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumKey2"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," enumKeyPress"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"SwitchModes"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),Ms={id:"运动控制中枢",tabindex:"-1"},Rs=s("p",null,"直接控制电机的函数就是之前写的那些。",-1),Ts=s("p",null,"设置系统 10ms 事件回调函数来控制运动：",-1),ws=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 简单的 PWM，将电机转速控制为全速的 1/speedControl")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"TenMsCallback"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"flag"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 未上锁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"(!"),s("span",{style:{color:"#F07178"}},"speedState"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"switch"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"mode"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 根据当前模式选择运动控制函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#82AAFF"}},"Remote"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#82AAFF"}},"Remote"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#82AAFF"}},"AutoMove"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetUltraSonic"),s("span",{style:{color:"#89DDFF"}},"());")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#82AAFF"}},"Follow"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetUltraSonic"),s("span",{style:{color:"#89DDFF"}},"());")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"				"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"(++"),s("span",{style:{color:"#F07178"}},"speedState "),s("span",{style:{color:"#89DDFF"}},">="),s("span",{style:{color:"#F07178"}}," speedControl"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			speedState "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),Ls=s("p",null,"在程序中，0 <= speedState < speedControl。系统每次执行回调函数 speedState 会自加，超出范围后再赋值为0。只有在 speedState 为0时小车才会运动。",-1),Ps=s("p",null,"系统每执行 speedControl 次回调函数，只会有一次允许小车运动，即调整速度为全速的 1/speedControl。改变 speedControl 的值即可改变速度：",-1),Is=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 调整速度，speedControl 的值是 3或4-speedLevel，所以speedLevel越大，速度越大")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ChangeSpeed"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"switch"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedLevel "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedLevel "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedLevel "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),Vs=s("p",null,"你问我难道老师没有写速度控制？当然写了，可老师的 PWM 是控制 EXT 接口的，我用不了。步进电机那种从 S1 到 S4 依次扫描下来的方式也做不到控制两个直流电机。那就自己写咯……",-1),Bs={id:"模式转换",tabindex:"-1"},Us=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 在四种模式之间轮换：红外->蓝牙->避障->跟随->红外...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"SwitchModes"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"switch"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"mode"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"ModeBTRemote"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"ModeAuto"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"ModeFollow"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"ModeIRRemote"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),Ks={id:"红外和蓝牙遥控",tabindex:"-1"},Ns=s("p",null,"红外遥控和蓝牙遥控都是一套逻辑，遥控器发送的命令数据和对应动作如下：",-1),$s=s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("strong",null,"命令")]),s("th",null,[s("strong",null,"动作")])])]),s("tbody",null,[s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x00")]),s("td",null,"停车")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x01")]),s("td",null,"前进")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x02")]),s("td",null,"左转")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x03")]),s("td",null,"右转")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x04")]),s("td",null,"后退")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x05")]),s("td",null,"鸣笛")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x06")]),s("td",null,"模式转换")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x07")]),s("td",null,"上锁解锁")]),s("tr",null,[s("td",null,[s("strong",null,"0xFA,0x08")]),s("td",null,"切换速度档位")])])],-1),Hs=s("p",null,"红外遥控器就是另一块同样的板子，按下按键发送命令：",-1),Ws=s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("strong",null,"按键")]),s("th",null,[s("strong",null,"动作")])])]),s("tbody",null,[s("tr",null,[s("td",null,[s("strong",null,"Up")]),s("td",null,"前进")]),s("tr",null,[s("td",null,[s("strong",null,"Left")]),s("td",null,"左转")]),s("tr",null,[s("td",null,[s("strong",null,"Right")]),s("td",null,"右转")]),s("tr",null,[s("td",null,[s("strong",null,"Down")]),s("td",null,"后退")]),s("tr",null,[s("td",null,[s("strong",null,"Center")]),s("td",null,"停车")]),s("tr",null,[s("td",null,[s("strong",null,"Key3")]),s("td",null,"不发给小车，用于切换Key1和Key2的模式")]),s("tr",null,[s("td",null,[s("strong",null,"Key1"),l(),s("strong",null,"模式0")]),s("td",null,"鸣笛")]),s("tr",null,[s("td",null,[s("strong",null,"Key1"),l(),s("strong",null,"模式1")]),s("td",null,"上锁解锁")]),s("tr",null,[s("td",null,[s("strong",null,"Key2"),l(),s("strong",null,"模式0")]),s("td",null,"速度控制")]),s("tr",null,[s("td",null,[s("strong",null,"Key2"),l(),s("strong",null,"模式1")]),s("td",null,"模式转换")])])],-1),Os=s("p",null,"红外遥控器的程序就是简单的按键事件和导航按键事件回调函数，就不贴出来了。",-1),Xs=s("p",null,"小车的红外模式、蓝牙模式初始化：",-1),Gs=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 红外遥控模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeIRRemote"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 默认模式下显示速度等级和默认指令")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"IrInit"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"NEC_R05d"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"								  // 设置红外协议基本时间片时长，接收到的数据在回调函数和 Remote() 中再进行内容校验")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetIrRxd"),s("span",{style:{color:"#89DDFF"}},"(&"),s("span",{style:{color:"#F07178"}},"rxd"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetEventCallBack"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEventIrRxd"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," IRCallback"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	mode "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 蓝牙遥控模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeBTRemote"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"Uart2Init"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"9600"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," Uart2UsedforEXT"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 将串口2的波特率设为9600，用于 EXT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetUart2Rxd"),s("span",{style:{color:"#89DDFF"}},"(&"),s("span",{style:{color:"#F07178"}},"rxd"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#F07178"}},"rxdHead"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 将接收到的数据存到 rxd，不在此处设置校验")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"									   "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 放到 Remote() 中和红外接收的数据一样用 if 语句校验")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"SetEventCallBack"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEventUart2Rxd"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," Uart2Callback"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	mode "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),Zs=s("p",null,"接收到数据的回调函数：",-1),qs=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 红外接收到数据的回调函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"IRCallback"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetIrRxNum"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," rxdHead"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 简单校验，剩下的与运动状态有关的指令在 Remote() 中校验")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]);"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 数码管显示接收到的指令（0到8）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"SwitchModes"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},' //IrPrint("CodeZone\\n", sizeof("CodeZone\\n"));')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#F07178"}},"flag"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 接收到7的时候进行上锁解锁操作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"8"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"ChangeSpeed"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 蓝牙接收到数据的回调函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Uart2Callback"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," rxdHead"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 由于蓝牙初始化时不再设置校验，所以在这里简单校验")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"						   "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 运动状态指令和红外模式一样在 Remote() 中校验")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]);"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 数码管显示接收到的指令（0到8）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"SwitchModes"),s("span",{style:{color:"#89DDFF"}},"();"),s("span",{style:{color:"#676E95","font-style":"italic"}},' //Uart2Print("CodeZone\\n", sizeof("CodeZone\\n"));')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#F07178"}},"flag"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 接收到7的时候进行上锁解锁操作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"8"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"ChangeSpeed"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),zs=s("p",null,"遥控模式下的控制：",-1),Qs=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 遥控：")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 现在 Remote() 由 TenMsCallback() 直接调用")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 这里不再包含上锁解锁等按下后只执行一次的操作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 上述操作仅在接收数据事件的回调函数里判断并执行")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Remote"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"	"),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 校验数据头")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," rxdHead"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"switch"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rxd"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"Forward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"TurnLeft"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"TurnRight"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"Backward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"case"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"SetBeep"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"440"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"50"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),js={id:"避障",tabindex:"-1"},Js=s("p",null,"避障模式的初始化：",-1),Ys=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 避障模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeAuto"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"EXTInit"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEXTUltraSonic"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	dirFlag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	mode "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),sl=s("p",null,"避障模式下的控制：",-1),ll=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 显示距离数值，根据距离选择方向")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * i 为距离值，单位是厘米")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AutoMove"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"i"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1000"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"100"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," i "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 显示速度等级、与障碍物间的距离")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"20"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"Forward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		dirFlag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#F07178"}},"dirFlag"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"SetBeep"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1000"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#F07178"}}," i"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 距离值过小时蜂鸣器报警")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"dirFlag"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"TurnLeft"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#82AAFF"}},"TurnRight"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"	"),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 当前可以看作随机转向，复杂情况下可能导致小车找不到可行路径")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),ol=s("p",null,"运动逻辑：",-1),nl=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/27/pFOxqZhGQ3ArHud.png",alt:"避障模式运动逻辑"})],-1),tl=s("p",null,[s("em",null,"显然控制函数每 10ms 就可能被调用，这个流程图里就没有循环结构了。")],-1),el=s("p",null,"不得不说这个运动逻辑很有问题。在这个逻辑下，小车遇到障碍时的转向算是随机的，但是在复杂情况下就可能使小车一会儿左转一会儿右转，最后转不出去。让小车始终转向一个方向会好些。",-1),al=s("p",null,"由于硬件限制，我装不上舵机，也装不上多个超声波模块，就只能做到让它避开正前方的障碍了。（连这一个超声波模块都要跟蓝牙模块抢 EXT 接口，换模式还得插拔……）",-1),cl={id:"跟随",tabindex:"-1"},pl=s("p",null,"说是跟随，其实就是和障碍物保持一定距离罢了。",-1),Fl=s("p",null,"模式初始化：",-1),rl=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 跟随模式初始化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ModeFollow"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"EXTInit"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"enumEXTUltraSonic"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	mode "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),yl=s("p",null,"该模式下的运动控制：",-1),Dl=s("div",{class:"language-c"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * 显示距离数值，保持一定距离")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," * i 为距离值，单位是厘米")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Follow"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"i"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#82AAFF"}},"Seg7Print"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"speedLevel"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"			"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"1000"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"100"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," i "),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 显示速度等级、与障碍物间的距离")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"20"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"Forward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"i "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		speedControl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F07178"}}," speedLevel"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"SetBeep"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1000"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#F07178"}}," i"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 距离值过小时蜂鸣器报警")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"Backward"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"		"),s("span",{style:{color:"#82AAFF"}},"VStop"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"	"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),il=s("p",null,"这个运动逻辑就简单了：",-1),Cl=s("p",null,[s("img",{src:"https://i.loli.net/2021/09/27/u2kjTUFf97LInDW.png",alt:"跟随模式运动逻辑"})],-1),Al=s("p",null,"当然，“跟随”的目标也只限正前方。",-1),dl={id:"总结",tabindex:"-1"},ul=s("p",null,"所以我得到了什么呢？一个有四种模式的三蹦子。甚好。最初的目标实现了，这下不会空虚寂寞了（笑）。这个设计也拿了院里竞赛的一等奖，爽到。",-1),hl=s("p",null,"当然，这个三蹦子还有很多可以改进的地方，包括一些运动逻辑和硬件的改装等等……嗯，未来可期！",-1),fl=s("details",null,[s("summary",null,"一点负能量的东西……"),l(" 关于这门课的得分……自己把设计思路输出出去，还提供了一些技术指导，结果那个同学几乎完全复刻，缝合了他自己原本的设计，比我得分还高……多多少少会感觉心里不舒服……算了算了…… ")],-1);function _l(e,El,gl,ml,p,vl){const n=A,F=r;return i(),D(F,{frontmatter:p.frontmatter,data:p.data},{"main-content-md":o(()=>[h,f,s("h2",_,[l("三轮车也是车 "),t(n,{class:"header-anchor",href:"#三轮车也是车","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),E,g,m,v,S,b,k,x,M,C(" more "),s("h2",R,[l("从零（并不是）开始的造三轮生活 "),t(n,{class:"header-anchor",href:"#从零（并不是）开始的造三轮生活","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),T,w,L,s("h3",P,[l("电机驱动 "),t(n,{class:"header-anchor",href:"#电机驱动","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),I,s("p",null,[l("我用的板子就是之前"),t(n,{href:"https://afool.top/learning/stc-beep-music/",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("蜂鸣器唱《国际歌》")]),_:1}),l("的那块，芯片型号是 IAP15F2K60S2（基本等同于STC15F2K60S2）。板子上有三个拓展接口：EXT、SM 和 485。大概长这样：")]),V,B,U,K,N,$,H,W,O,X,G,s("h3",Z,[l("蓝牙遥控与串口通信 "),t(n,{class:"header-anchor",href:"#蓝牙遥控与串口通信","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),q,z,Q,j,J,Y,ss,ls,os,ns,ts,es,as,s("h2",cs,[l("当你拥有了现成的轮子 "),t(n,{class:"header-anchor",href:"#当你拥有了现成的轮子","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ps,Fs,rs,ys,Ds,is,Cs,s("p",null,[l("没办法，我也只能多搞点东西了。先把蓝牙遥控换成了 BSP 的实现，加了上锁功能。此外在小车上加什么好呢？在咨询了"),t(n,{href:"https://blog.csdn.net/dasifhoaisfg?spm=1001.2014.3001.5509",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("隔壁老王")]),_:1}),l("后，我确定了“超声波”这个方向，避障什么的自然是少不了，跟随式行李箱也有点意思。完成这些之后我又附加了一个红外遥控的模式。")]),As,s("h3",ds,[l("车身功能 "),t(n,{class:"header-anchor",href:"#车身功能","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),us,s("h3",hs,[l("程序构成 "),t(n,{class:"header-anchor",href:"#程序构成","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),fs,_s,Es,s("h4",gs,[l("系统变量和函数声明 "),t(n,{class:"header-anchor",href:"#系统变量和函数声明","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ms,vs,s("h4",Ss,[l("系统初始化 "),t(n,{class:"header-anchor",href:"#系统初始化","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),bs,s("h4",ks,[l("车身按键功能 "),t(n,{class:"header-anchor",href:"#车身按键功能","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),xs,s("h4",Ms,[l("运动控制中枢 "),t(n,{class:"header-anchor",href:"#运动控制中枢","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Rs,Ts,ws,Ls,Ps,Is,Vs,s("h4",Bs,[l("模式转换 "),t(n,{class:"header-anchor",href:"#模式转换","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Us,s("h4",Ks,[l("红外和蓝牙遥控 "),t(n,{class:"header-anchor",href:"#红外和蓝牙遥控","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ns,$s,Hs,Ws,Os,s("p",null,[l("至于蓝牙遥控器……~~比卷，~~我又写了个"),t(n,{href:"https://github.com/charliedu2000/BLESerial",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("安卓蓝牙遥控器")]),_:1}),l("，界面上的按键名就是对应功能。")]),Xs,Gs,Zs,qs,zs,Qs,s("h4",js,[l("避障 "),t(n,{class:"header-anchor",href:"#避障","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Js,Ys,sl,ll,ol,nl,tl,el,al,s("h4",cl,[l("跟随 "),t(n,{class:"header-anchor",href:"#跟随","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),pl,Fl,rl,yl,Dl,il,Cl,Al,s("h2",dl,[l("总结 "),t(n,{class:"header-anchor",href:"#总结","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ul,hl,fl]),"main-header":o(()=>[a(e.$slots,"main-header")]),"main-header-after":o(()=>[a(e.$slots,"main-header-after")]),"main-nav":o(()=>[a(e.$slots,"main-nav")]),"main-content":o(()=>[a(e.$slots,"main-content")]),"main-content-after":o(()=>[a(e.$slots,"main-content-after")]),"main-nav-before":o(()=>[a(e.$slots,"main-nav-before")]),"main-nav-after":o(()=>[a(e.$slots,"main-nav-after")]),comment:o(()=>[a(e.$slots,"comment")]),footer:o(()=>[a(e.$slots,"footer")]),aside:o(()=>[a(e.$slots,"aside")]),"aside-custom":o(()=>[a(e.$slots,"aside-custom")]),default:o(()=>[a(e.$slots,"default")]),_:3},8,["frontmatter","data"])}const Tl=y(u,[["render",_l]]);export{Rl as __pageData,Tl as default};
